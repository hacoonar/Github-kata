# Github-kata
TDD kata
https://ihower.tw/blog/archives/8162

有一家書店在賣哈利波特書籍系列，每一本書定價 $100 元。買兩本不同的書可以打5% 的折扣、買三本不同的書可以打 10% 的折扣、買四本不同的書可以打 20%。如果買到五本可以打到 25% 的折扣。請寫出一個函式可以計算價格。

我們練習寫下第一個測試案例，一開始這個測試案例應該是失敗的，因為還沒有開始實作這個函式：

    第一集買 1 本
    總價應為 100 元

然後我們就可以開始實作這個函式通過這個測試案例。根據 TDD 規則，你只需要通過這個測試案例即可，不多也不少。例如這個實作只要將數量乘上100元就可以通過了。

接著，我們可以寫第二個測試案例，一開始這個測試案例也是不通過的：

    第一集買 1 本、第二集買 1 本
    總價應為 190 元

接著撰寫實作通過以上兩個測試案例。接著繼續撰寫下一個測試案例，事情開始變得有趣：

    第一集買 1 本、第二集買 2 本
    總價應為 290 元 (要不同集數才有折扣，所以第二集第二本沒有折扣)

重複這個 Baby Steps 循環過程，直到完成為止。注意，過程中你必須完全遵守 TDD 規則:

    一定是先寫一個不通過的單元測試，才開始實作功能
    每次只新加一個單元測試，只需要剛剛好不通過即可，不要一次加多個測試情境
    每次實作功能時，只需要剛剛好通過測試即可，不多也不少

聽起來很簡單吧，但是在這個過程中，你將不知不覺面對以下的問題：

    測試案例要怎麼寫？如何建構測試資料? 要舉多少例子才算完成可以涵蓋規格和所有 edge case?
    每一次的開發循環，程式都會變得越來越複雜，是不是要停下來重構一下? 讓程式可以更簡潔容易擴充
    如何確保每個測試案例都有效益? 不會發生砍掉實作卻沒有造成任何測試失敗
    如何安全地重構不會改壞之前寫好的程式?
    測試案例會越加越多 edge case，那麼實作要如何因應來越改越通用呢?
    API 要如何設計，才會好測試和呼叫?
    Test code 的品質、可讀性和擴充性也和 production code 也相等重要嗎?
